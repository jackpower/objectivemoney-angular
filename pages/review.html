<div class="container userReview">
    <!-- FILTER PLANNERS WHERE THE PLANNER ID MATCHES THE ROUTE PARAMETER, WHICH IS DEFINED BY THE PLANNER ID-->  

    <div ng-repeat="planner in plannerprofiles | filter: {pid: pid}:true">
        <div class="review row">
            <div class="col-sm-3">
                <div class="row reviewheader col-sm-12">
                        <img class="reviewheader-photo img-circle img-responsive" ng-src="img/plannerprofiles/{{ planner.photo }}.png"/>
                        <p id="reviewheader-name">{{ planner.plannerfirstname }} {{ planner.plannersurname }}</p>
                        <p id="reviewheader-company">{{ planner.company }}</p>
                        <p id="reviewheader-address"><i>{{ planner.addressCity | lowercase | capitalize }}, {{ planner.addressState }}</i></p>
                </div>
            </div>
            <form name="postreview">
            <div class="userReviewOverall col-sm-6">
                <p class="reviewbody-header">Overall Score</p>
                <p class="reviewbody-header-detail">How would you rate {{  planner.plannerfirstname }} on a scale of 1-5?<span class="reqAstrix">&nbsp;&#42</span></p>     
                <rating ng-model="rate" ng-change="reviews.score=rate" max="max" readonly="isReadonly" on-hover="hoveringOver(value)" on-leave="overStar = null" state-on="'fa fa-star reviewbody-rating searchprofilestarson'" state-off="'fa fa-star reviewbody-rating searchprofilestarsoff'" required></rating>
                <input name="rating" style="display: none;" ng-model="reviews.score" required></input>
            </div>
            <div class="userReviewOverall col-sm-3">
                <div ng-class="{ 'reviewbody-postreview': !postreview.$invalid, 'reviewbody-postreviewdisabled': postreview.$invalid }">
                    <p id="searchprofilefooter-text"><button class="reviewbody-rating-button" ng-click="postReview()" data-ng-disabled="postreview.$invalid">POST YOUR REVIEW&nbsp;&nbsp;&nbsp;<i class="fa fa-star"></i></button></p>
                </div>
            </div>
        </div>    
        <div class="reviewbody-details row">
            <div>
                <p class="reviewbody-header">About You</p>
                <p class="reviewbody-header-detail">What is your gender?</p>
                    <label class="radio-inline reviewbody-header-answer"><input type="radio" name="gender" value="male" ng-model="reviews.clientgender">Male</label>
                    <label class="radio-inline reviewbody-header-answer"><input type="radio" name="gender" value="female" ng-model="reviews.clientgender">Female</label>
                <p class="reviewbody-header-detail">What is your age?</p>
                    <input type="number" class="form-control reviewbody-header-answer reviewbody-header-input" id="age" min="1" ng-model="reviews.clientage"/>
                <p class="reviewbody-header-detail">What is your profession?</p>
                    <input type="text" class="form-control reviewbody-header-answer reviewbody-header-input" id="profession" ng-model="reviews.clientjob"/>
                <p class="reviewbody-header-detail">Would you like your name to remain anonymous?</p>
                    <label class="radio-inline reviewbody-header-answer"><input type="radio" name="anonymous" value="0" ng-model="reviews.anonymous">No</label>
                    <label class="radio-inline reviewbody-header-answer"><input type="radio" name="anonymous" value="1" ng-model="reviews.anonymous">Yes</label>
            </div>
            
            <div>
                <p class="reviewbody-header">Full Review</p>
                
                <p class="reviewbody-header-detail">Overall how would you describe your experience with {{  planner.plannerfirstname }}?</p>
                <textarea class="form-control reviewbody-header-textinput" rows="5" ng-model="reviews.overall" ng-disabled="overflow" ng-keypress="updateBody();"></textarea>
                <p class="reviewbody-info-wordsleft">{{ reviews.overallwordsleft }} characters left</p>
                
                <p class="reviewbody-header-detail">What did {{  planner.plannerfirstname }} help you with?</p>
                <textarea class="form-control reviewbody-header-textinput" rows="5" ng-model="reviews.services" ng-disabled="overflow" ng-keypress="updateBody();"></textarea>
                <p class="reviewbody-info-wordsleft">{{ reviews.serviceswordsleft }} characters left</p>
                
                <p class="reviewbody-header-detail">What did {{  planner.plannerfirstname }} do really well?</p>
                <textarea class="form-control reviewbody-header-textinput" rows="5" ng-model="reviews.good" ng-disabled="overflow" ng-keypress="updateBody();"></textarea>
                <p class="reviewbody-info-wordsleft">{{ reviews.goodwordsleft }} characters left</p>
                
                <p class="reviewbody-header-detail">What could {{  planner.plannerfirstname }} have done better?</p>
                <textarea class="form-control reviewbody-header-textinput" rows="5" ng-model="reviews.better" ng-disabled="overflow" ng-keypress="updateBody();"></textarea>
                <p class="reviewbody-info-wordsleft">{{ reviews.betterwordsleft }} characters left</p>
                
            </div>
            
            <div>
                <div ng-class="{ 'reviewbody-button': !postreview.$invalid, 'reviewbody-buttondisabled': postreview.$invalid }">
                    <p id="searchprofilefooter-text"><button class="reviewbody-rating-button" ng-click="postReview()" data-ng-disabled="postreview.$invalid">POST YOUR REVIEW&nbsp;&nbsp;&nbsp;<i class="fa fa-star"></i></button></p>
                </div>
            </div>
        </div>
        </form>
    </div>
</div>