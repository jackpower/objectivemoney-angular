omApp.controller("searchController",["$scope","$routeParams","$rootScope","$window","$location","searchquery","enquiry","reviews","$http","Data","$timeout","$anchorScroll","$modal","$log",function($scope,$routeParams,$rootScope,$window,$location,searchquery,enquiry,reviews,$http,Data,$timeout,$anchorScroll,$modal,$log){$scope.searchquery={},$scope.enquiry={},$scope.reviews={},$scope.fname={},$scope.fname.name="bob",$scope.searchquery=searchquery,$scope.enquiry=enquiry,$scope.reviews=reviews,$scope.searchquery.updateTimesSeen=function(){$scope.searchquery.timesSeen=1},$scope.open=function(size){$scope.searchquery.updateTimesSeen();var modalInstance=$modal.open({animation:$scope.animationsEnabled,templateUrl:"pages/modalWalkthrough.html",controller:["$scope","$modalInstance","searchquery",function($scope,$modalInstance,searchquery){$scope.searchquery=searchquery,$scope.ok=function(){$modalInstance.close()}}],size:size,resolve:{items:function(){return $scope.items}}});modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){$log.info("Modal dismissed at: "+new Date)})},$scope.closeBar=!1,$scope.setCloseBar=function(){$scope.closeBar=!0},$scope.showBar=!1,$scope.setShowBar=function(){($scope.searchquery.lat>0||$scope.searchquery.lat<0)&&!$scope.closeBar&&$timeout(function(){$scope.showBar=!0},3e4),$scope.closeBar&&($scope.showBar=!1)},$scope.popoutClosed=!1,$scope.closePopout=function(){$scope.popoutClosed=!0},$scope.popoutOpen=!1,$scope.setPopoutOpen=function(){$location.path().indexOf("plannerprofilefull")&&!$scope.popoutClosed&&$timeout(function(){$scope.popoutOpen=!0},2e4),$scope.popoutClosed&&($scope.popoutOpen=!1)},$scope.setPopoutOpen(),$scope.plannerReviews={},$http.get("php/getPlannerReviews.php").success(function(data){$scope.plannerReviews=data}),$scope.plannerComments={},$http.get("php/getPlannerComments.php").success(function(data){$scope.plannerComments=data}),$scope.login={},$scope.doLogin=function(customer){Data.post("login",{customer:customer}).then(function(results){if(Data.toast(results),"success"==results.status)switch(window.location.hash){case"plannerenquiry"+$routeParams.id:$location.path("enquire"+$routeParams.id);break;case"plannerrating"+$routeParams.id:$location.path("review"+$routeParams.id)}})},$scope.signup={},$scope.signup={email:"",password:"",name:""},$scope.signUp=function(customer){Data.post("signUp",{customer:customer}).then(function(results){if(Data.toast(results),"success"==results.status)switch(window.location.hash){case"plannerenquiry"+$routeParams.id:$location.path("enquire"+$routeParams.id);break;case"plannerrating"+$routeParams.id:$location.path("review"+$routeParams.id)}})},$scope.logout=function(){Data.get("logout").then(function(results){Data.toast(results),$location.path("search")})},$scope.changeAuth=function(){$rootScope.authenticated=!1},$scope.enquiry={requirements:"",usergender:"",userage:"",userjob:""},$scope.postEnquiry=function(){$http.post("php/postEnquiry.php",{enquiry:$scope.enquiry,userid:$scope.userid,pid:$scope.pid,user_name:$scope.name,user_email:$scope.email}).success(function(result){console.log(result),$location.path("enquirythanks"+$routeParams.id)}).error(function(result){console.log(result),$location.path("enquire"+$routeParams.id)})},$scope.postSearch=function(){$http.post("php/postSearch.php",{searchquery:$scope.searchquery,userid:$scope.userid,pid:$scope.pid}).success(function(result){console.log(result)}).error(function(data,status){console.log(data)})},$scope.customerList={},$scope.mailingListSubmit=function(){$http.post("php/postCustomerMailing.php",{searchquery:$scope.searchquery,customerList:$scope.customerList}).success(function(result){console.log(result),$location.path("mailinglistthanks")}).error(function(data,status){console.log(data)})},$scope.postSearchUnfulfilled=function(){$http.post("php/postSearchUnfulfilled.php",{searchquery:$scope.searchquery}).success(function(result){console.log(result)}).error(function(data,status){console.log(data)})},$scope.searchquery.formFilled=!1,$scope.checkFormCompleteness=function(){$timeout(function(){0===$scope.searchquery.monthlysalary&&0===$scope.searchquery.lumpsum||!($scope.searchquery.lat>0||$scope.searchquery.lat<0)||($scope.searchquery.formFilled=!0)},1e3)},$scope.reviews={clientgender:"",clientage:"",clientjob:"",score:"",overall:"",services:"",good:"",better:"",postRegex:/(?!.*)/,postcode:""},$scope.reviews.postRegex="foo",$scope.postReview=function(){$http.post("php/postReview.php",{reviews:$scope.reviews,userid:$scope.userid,pid:$scope.pid,name:$scope.name}).success(function(result){console.log(result),$location.path("reviewthanks"+$routeParams.id)}).error(function(data,status){console.log(data)})},$scope.setSearchValueToNull=function(){$scope.searchquery.investments||($scope.searchquery.investments=!1),$scope.searchquery.LT||($scope.searchquery.LT=!1),$scope.searchquery.ST||($scope.searchquery.ST=!1),$scope.searchquery.TP||($scope.searchquery.TP=!1),$scope.searchquery.EP||($scope.searchquery.EP=!1),$scope.searchquery.MA||($scope.searchquery.MA=!1),$scope.searchquery.english||($scope.searchquery.english=!1),$scope.searchquery.afrikaans||($scope.searchquery.afrikaans=!1),$scope.searchquery.zulu||($scope.searchquery.zulu=!1),$scope.searchquery.xhosa||($scope.searchquery.xhosa=!1),$scope.searchquery.southernsotho||($scope.searchquery.southernsotho=!1),$scope.searchquery.tswana||($scope.searchquery.tswana=!1),$scope.searchquery.northernsotho||($scope.searchquery.northernsotho=!1),$scope.searchquery.tsonga||($scope.searchquery.tsonga=!1),$scope.searchquery.venda||($scope.searchquery.venda=!1),$scope.searchquery.swati||($scope.searchquery.swati=!1),$scope.searchquery.ndebele||($scope.searchquery.ndebele=!1),("male"!==$scope.searchquery.gender||"female"!==$scope.searchquery.gender)&&($scope.searchquery.gender=""),"undefined"==typeof $scope.searchquery.monthlysalary&&($scope.searchquery.monthlysalary=0),"undefined"==typeof $scope.searchquery.lumpsum&&($scope.searchquery.lumpsum=0),"undefined"==typeof $scope.searchquery.clientvalue&&($scope.searchquery.clientvalue=0)},$scope.setSearchValueToNull(),$scope.plannerprofiles=[],$http.get("php/getPlannerProfiles.php").then(function(response){$scope.plannerprofiles=response.data,$scope.plannersFilterd=[],$scope.plannerprofiles.currentPage=1,$scope.plannerprofiles.itemsPerPage=4,$scope.plannerprofiles.maxSize=5,$scope.plannerprofiles.setPage=function(pageNo){$scope.plannerprofiles.currentPage=pageNo},$scope.setPageNameChange=function(){$scope.searchquery.querybol&&$scope.plannerprofiles.setPage(1)},$scope.plannerprofiles.pageChanged=function(){$anchorScroll("navbar-example")},$scope.options={componentRestrictions:{country:"ZA"}},$scope.client1year=function(monthly,lump){return isNaN(monthly)&&isNaN(lump)?$scope.searchquery.clientvalue=0:isNaN(monthly)?$scope.searchquery.clientvalue=lump:isNaN(lump)?$scope.searchquery.clientvalue=12*monthly*.15:$scope.searchquery.clientvalue=12*monthly*.15+lump},$scope.plannerprofiles.transformName=function(){for(i=0;i<$scope.plannerprofiles.length;i++)$scope.plannerprofiles[i].plannerfullname=$scope.plannerprofiles[i].plannerfirstname+" "+$scope.plannerprofiles[i].plannersurname},$scope.plannerprofiles.transformName(),$scope.plannerprofiles.transformState=function(){for(i=0;i<$scope.plannerprofiles.length;i++)"GP"===$scope.plannerprofiles[i].addressState?$scope.plannerprofiles[i].addressState="Gauteng":"EC"===$scope.plannerprofiles[i].addressState?$scope.plannerprofiles[i].addressState="Eastern Cape":"FS"===$scope.plannerprofiles[i].addressState?$scope.plannerprofiles[i].addressState="Free State":"KZN"===$scope.plannerprofiles[i].addressState?$scope.plannerprofiles[i].addressState="KwaZulu-Natal":"LP"===$scope.plannerprofiles[i].addressState?$scope.plannerprofiles[i].addressState="Limpopo":"MP"===$scope.plannerprofiles[i].addressState?$scope.plannerprofiles[i].addressState="Mpumalanga":"NC"===$scope.plannerprofiles[i].addressState?$scope.plannerprofiles[i].addressState="Northern Cape":"NW"===$scope.plannerprofiles[i].addressState&&($scope.plannerprofiles[i].addressState="North West")},$scope.plannerprofiles.transformState(),$scope.plannerprofiles.transformIndependence=function(){for(i=0;i<$scope.plannerprofiles.length;i++)"1"===$scope.plannerprofiles[i].independent?$scope.plannerprofiles[i].independent="Independent":$scope.plannerprofiles[i].independent="Not Independent"},$scope.plannerprofiles.transformIndependence(),$scope.plannerprofiles.transformAge=function(){for(i=0;i<$scope.plannerprofiles.length;i++)$scope.plannerprofiles[i].date_of_birth2=new Date($scope.plannerprofiles[i].date_of_birth)},$scope.plannerprofiles.transformAge(),$scope.plannerprofiles.transformExp=function(){for(i=0;i<$scope.plannerprofiles.length;i++)$scope.plannerprofiles[i].planner_start_date2=new Date($scope.plannerprofiles[i].planner_start_date)},$scope.plannerprofiles.transformExp(),$scope.plannerprofiles.clientDistance=function(){for(i=0;i<$scope.plannerprofiles.length;i++){var lat1=$scope.plannerprofiles[i].addressLat,lon1=$scope.plannerprofiles[i].addressLong,lat2=$scope.searchquery.lat,lon2=$scope.searchquery["long"],R=6371,dLat=(lat2-lat1)*Math.PI/180,dLon=(lon2-lon1)*Math.PI/180,a=Math.sin(dLat/2)*Math.sin(dLat/2)+Math.cos(lat1*Math.PI/180)*Math.cos(lat2*Math.PI/180)*Math.sin(dLon/2)*Math.sin(dLon/2),c=2*Math.asin(Math.sqrt(a));$scope.plannerprofiles[i].distancetoclient=Math.round(R*c)}},$scope.plannerprofiles.clientDistance(),$scope.scorereview=5,$scope.scoreCFP=1,$scope.scoreAFP=.75,$scope.scoreRFP=1,$scope.scoreFSA=.25,$scope.serviceratingInHouse=1,$scope.serviceratingOutsource=.5,$scope.scorelanguages=1,$scope.scoregender=1,$scope.plannerprofiles.relevanceScore=function(){for(i=0;i<$scope.plannerprofiles.length;i++)$scope.plannerprofiles[i].relevance=0;for(i=0;i<$scope.plannerprofiles.length;i++)$scope.searchquery.gender===$scope.plannerprofiles[i].plannergender?$scope.plannerprofiles[i].relevance+=$scope.scoregender:$scope.searchquery.gender!==$scope.plannerprofiles[i].plannergender&&($scope.plannerprofiles[i].relevance+=0);for(i=0;i<$scope.plannerprofiles.length;i++)"1"===$scope.plannerprofiles[i].verified?$scope.plannerprofiles[i].relevance=$scope.plannerprofiles[i].relevance+10:"0"===$scope.plannerprofiles[i].verified&&($scope.plannerprofiles[i].relevance=$scope.plannerprofiles[i].relevance-10);for(i=0;i<$scope.plannerprofiles.length;i++)"1"===$scope.plannerprofiles[i].CFP?$scope.plannerprofiles[i].relevance+=$scope.scoreCFP:"1"===$scope.plannerprofiles[i].AFP?$scope.plannerprofiles[i].relevance+=$scope.scoreAFP:"1"===$scope.plannerprofiles[i].RFP?$scope.plannerprofiles[i].relevance+=$scope.scoreRFP:"1"===$scope.plannerprofiles[i].FSA?$scope.plannerprofiles[i].relevance+=$scope.scoreFSA:"1"===$scope.plannerprofiles[i].undisclosed&&($scope.plannerprofiles[i].relevance+=0);for(i=0;i<$scope.plannerprofiles.length;i++)$scope.searchquery.investments===!0&&"inHouse"===$scope.plannerprofiles[i].investments?$scope.plannerprofiles[i].relevance+=$scope.serviceratingInHouse:$scope.searchquery.investments===!0&&"outsource"===$scope.plannerprofiles[i].investments&&($scope.plannerprofiles[i].relevance+=$scope.serviceratingOutsource);for(i=0;i<$scope.plannerprofiles.length;i++)$scope.searchquery.LT===!0&&"inHouse"===$scope.plannerprofiles[i].LT?$scope.plannerprofiles[i].relevance+=$scope.serviceratingInHouse:$scope.searchquery.LT===!0&&"outsource"===$scope.plannerprofiles[i].LT&&($scope.plannerprofiles[i].relevance+=$scope.serviceratingOutsource);for(i=0;i<$scope.plannerprofiles.length;i++)$scope.searchquery.ST===!0&&"inHouse"===$scope.plannerprofiles[i].ST?$scope.plannerprofiles[i].relevance+=$scope.serviceratingInHouse:$scope.searchquery.ST===!0&&"outsource"===$scope.plannerprofiles[i].ST&&($scope.plannerprofiles[i].relevance+=$scope.serviceratingOutsource);for(i=0;i<$scope.plannerprofiles.length;i++)$scope.searchquery.EP===!0&&"inHouse"===$scope.plannerprofiles[i].EP?$scope.plannerprofiles[i].relevance+=$scope.serviceratingInHouse:$scope.searchquery.EP===!0&&"outsource"===$scope.plannerprofiles[i].EP&&($scope.plannerprofiles[i].relevance+=$scope.serviceratingOutsource);for(i=0;i<$scope.plannerprofiles.length;i++)$scope.searchquery.TP===!0&&"inHouse"===$scope.plannerprofiles[i].TP?$scope.plannerprofiles[i].relevance+=$scope.serviceratingInHouse:$scope.searchquery.TP===!0&&"outsource"===$scope.plannerprofiles[i].TP&&($scope.plannerprofiles[i].relevance+=$scope.serviceratingOutsource);for(i=0;i<$scope.plannerprofiles.length;i++)$scope.searchquery.MA===!0&&"inHouse"===$scope.plannerprofiles[i].MA?$scope.plannerprofiles[i].relevance+=$scope.serviceratingInHouse:$scope.searchquery.MA===!0&&"outsource"===$scope.plannerprofiles[i].MA&&($scope.plannerprofiles[i].relevance+=$scope.serviceratingOutsource);for(i=0;i<$scope.plannerprofiles.length;i++)""===$scope.plannerprofiles[i].average_rating?$scope.plannerprofiles[i].relevance+=0:$scope.plannerprofiles[i].relevance+=parseFloat($scope.plannerprofiles[i].average_rating)},$scope.getreqlanguageScore=function(){$scope.searchquery.english||$scope.searchquery.afrikaans||$scope.searchquery.zulu||$scope.searchquery.xhosa||$scope.searchquery.southernsotho||$scope.searchquery.tswana||$scope.searchquery.northernsotho||$scope.searchquery.tsonga||$scope.searchquery.venda||$scope.searchquery.swati||$scope.searchquery.ndebele?$scope.searchquery.reqlanguagescore=1:$scope.searchquery.reqlanguagescore=0},$scope.plannerprofiles.getlanguageScore=function(){for(i=0;i<$scope.plannerprofiles.length;i++)$scope.searchquery.english===!0&&"1"===$scope.plannerprofiles[i].english?$scope.plannerprofiles[i].languagescore=1:$scope.searchquery.afrikaans===!0&&"1"===$scope.plannerprofiles[i].afrikaans?$scope.plannerprofiles[i].languagescore=1:$scope.searchquery.zulu===!0&&"1"===$scope.plannerprofiles[i].zulu?$scope.plannerprofiles[i].languagescore=1:$scope.searchquery.xhosa===!0&&"1"===$scope.plannerprofiles[i].xhosa?$scope.plannerprofiles[i].languagescore=1:$scope.searchquery.southernsotho===!0&&"1"===$scope.plannerprofiles[i].southernsotho?$scope.plannerprofiles[i].languagescore=1:$scope.searchquery.tswana===!0&&"1"===$scope.plannerprofiles[i].tswana?$scope.plannerprofiles[i].languagescore=1:$scope.searchquery.northernsotho===!0&&"1"===$scope.plannerprofiles[i].northernsotho?$scope.plannerprofiles[i].languagescore=1:$scope.searchquery.tsonga===!0&&"1"===$scope.plannerprofiles[i].tsonga?$scope.plannerprofiles[i].languagescore=1:$scope.searchquery.venda===!0&&"1"===$scope.plannerprofiles[i].venda?$scope.plannerprofiles[i].languagescore=1:$scope.searchquery.swati===!0&&"1"===$scope.plannerprofiles[i].swati?$scope.plannerprofiles[i].languagescore=1:$scope.searchquery.ndebele===!0&&"1"===$scope.plannerprofiles[i].ndebele?$scope.plannerprofiles[i].languagescore=1:$scope.plannerprofiles[i].languagescore=0},$scope.getreqlanguagecompara=function(){for(i=0;i<$scope.plannerprofiles.length;i++)$scope.plannerprofiles[i].languagescore>=$scope.searchquery.reqlanguagescore?$scope.plannerprofiles[i].reqlanguagecompara=1:$scope.plannerprofiles[i].reqlanguagecompara=0},$scope.getreqserviceScore=function(){$scope.searchquery.reqservicescore=0,$scope.searchquery.investments?$scope.searchquery.reqservicescore+=1:$scope.searchquery.reqservicescore+=0,$scope.searchquery.LT?$scope.searchquery.reqservicescore+=1:$scope.searchquery.reqservicescore+=0,$scope.searchquery.ST?$scope.searchquery.reqservicescore+=1:$scope.searchquery.reqservicescore+=0,$scope.searchquery.EP?$scope.searchquery.reqservicescore+=1:$scope.searchquery.reqservicescore+=0,$scope.searchquery.TP?$scope.searchquery.reqservicescore+=1:$scope.searchquery.reqservicescore+=0,$scope.searchquery.MA?$scope.searchquery.reqservicescore+=1:$scope.searchquery.reqservicescore+=0},$scope.plannerprofiles.getserviceScore=function(){for(i=0;i<$scope.plannerprofiles.length;i++)$scope.plannerprofiles[i].servicescore=0;for(i=0;i<$scope.plannerprofiles.length;i++)$scope.searchquery.investments===!0&&"notOffered"!==$scope.plannerprofiles[i].investments&&($scope.plannerprofiles[i].servicescore+=1);for(i=0;i<$scope.plannerprofiles.length;i++)$scope.searchquery.LT===!0&&"notOffered"!==$scope.plannerprofiles[i].LT&&($scope.plannerprofiles[i].servicescore+=1);for(i=0;i<$scope.plannerprofiles.length;i++)$scope.searchquery.ST===!0&&"notOffered"!==$scope.plannerprofiles[i].ST&&($scope.plannerprofiles[i].servicescore+=1);for(i=0;i<$scope.plannerprofiles.length;i++)$scope.searchquery.EP===!0&&"notOffered"!==$scope.plannerprofiles[i].EP&&($scope.plannerprofiles[i].servicescore+=1);for(i=0;i<$scope.plannerprofiles.length;i++)$scope.searchquery.TP===!0&&"notOffered"!==$scope.plannerprofiles[i].TP&&($scope.plannerprofiles[i].servicescore+=1);for(i=0;i<$scope.plannerprofiles.length;i++)$scope.searchquery.MA===!0&&"notOffered"!==$scope.plannerprofiles[i].MA&&($scope.plannerprofiles[i].servicescore+=1)},$scope.getreqservicecompara=function(){for(i=0;i<$scope.plannerprofiles.length;i++)$scope.plannerprofiles[i].servicescore>=$scope.searchquery.reqservicescore?$scope.plannerprofiles[i].reqservicecompara=1:$scope.plannerprofiles[i].reqservicecompara=0},$scope.getPlannerfilter=function(){for(i=0;i<$scope.plannerprofiles.length;i++)$scope.searchquery.clientvalue>=$scope.plannerprofiles[i].clientMinimum&&$scope.plannerprofiles[i].distancetoclient<$scope.plannerprofiles[i].travelWilling&&1===$scope.plannerprofiles[i].reqlanguagecompara&&1===$scope.plannerprofiles[i].reqservicecompara?$scope.plannerprofiles[i].plannerfilter=!0:$scope.plannerprofiles[i].plannerfilter=!1},$scope.searchquery.query="",$scope.searchquery.querybol=!1,$scope.getQuerylen=function(){$scope.searchquery.querylen=$scope.searchquery.query.length,0===$scope.searchquery.querylen?$scope.searchquery.querybol=!1:$scope.searchquery.querybol=!0},$scope.$watchGroup(["searchquery.gender","searchquery.investments","searchquery.LT","searchquery.ST","searchquery.TP","searchquery.EP","searchquery.MA","searchquery.english","searchquery.afrikaans","searchquery.zulu","searchquery.xhosa","searchquery.southernsotho","searchquery.tswana","searchquery.northernsotho","searchquery.tsonga","searchquery.venda","searchquery.swati","searchquery.ndebele","searchquery.address.name","searchquery.monthlysalary","searchquery.lumpsum","searchquery.query"],function(){$scope.client1year(searchquery.monthlysalary,searchquery.lumpsum),$scope.getreqlanguageScore(),$scope.plannerprofiles.getlanguageScore(),$scope.getreqlanguagecompara(),$scope.getreqserviceScore(),$scope.plannerprofiles.getserviceScore(),$scope.getreqservicecompara(),$scope.plannerprofiles.relevanceScore(),$scope.plannerprofiles.clientDistance(),$scope.getPlannerfilter(),$scope.getQuerylen(),$scope.setPageNameChange(),$scope.checkFormCompleteness(),$scope.setShowBar(),$scope.checkAddressCompleted()}),$scope.pid=$routeParams.id,$scope.plannerprofiles.pid=$routeParams.id}),$scope.sidebarOpen=!1,$scope.toggle=function(){$scope.sidebarOpen=!$scope.sidebarOpen},$scope.fullReviewOpen=!1,$scope.toggleReview=function(){$scope.fullReviewOpen=!$scope.fullReviewOpen},$scope.$watch(function(){return $window.innerWidth},function(value){$scope.searchquery.windowWidth=value}),$scope.isCollapsed=!0,$scope.maxchar=1e3,$scope.$watch("enquiry.requirements",function(newValue,oldValue){newValue&&(newValue.length>$scope.maxchar&&($scope.enquiry.requirements=oldValue),$scope.enquiry.wordsleft=$scope.maxchar-newValue.length)}),$scope.$watch("reviews.overall",function(newValue,oldValue){newValue&&(newValue.length>$scope.maxchar&&($scope.reviews.overall=oldValue),$scope.reviews.overallwordsleft=$scope.maxchar-newValue.length)}),$scope.$watch("reviews.services",function(newValue,oldValue){newValue&&(newValue.length>$scope.maxchar&&($scope.reviews.services=oldValue),$scope.reviews.serviceswordsleft=$scope.maxchar-newValue.length)}),$scope.$watch("reviews.good",function(newValue,oldValue){newValue&&(newValue.length>$scope.maxchar&&($scope.reviews.good=oldValue),$scope.reviews.goodwordsleft=$scope.maxchar-newValue.length)}),$scope.$watch("reviews.better",function(newValue,oldValue){newValue&&(newValue.length>$scope.maxchar&&($scope.reviews.better=oldValue),$scope.reviews.betterwordsleft=$scope.maxchar-newValue.length)}),$scope.rate=0,$scope.max=5,$scope.isReadonly=!1,$scope.hoveringOver=function(value){$scope.overStar=value},$scope.plannerprofiles.rate=0,$scope.plannerprofiles.max=5,$scope.plannerprofiles.isReadonly=!1,$scope.plannerprofiles.hoveringOver=function(value){$scope.plannerprofiles.overStar=value},$scope.loadShareThis=function(){stButtons.makeButtons()},$scope.myInterval=1500,$scope.slides=[{image:"psg_logo"},{image:"liberty_logo"},{image:"oldMutual_logo"},{image:"investec_logo"},{image:"hollard_logo"},{image:"discovery_logo"},{image:"sanlam_logo"},{image:"stanlib_logo"}],$scope.linkButton=function(path){$location.path(path)},$scope.requestMeeting=function(){$location.path("enquire"+$scope.plannerprofiles.pid)},$scope.searchquery.addressCompleted=!1,$scope.checkAddressCompleted=function(){($scope.searchquery.lat>0||$scope.searchquery.lat<0)&&($scope.searchquery.addressCompleted=!0)}}]),omApp.directive("plannerProfileSearch",function(){return{restrict:"EC",templateUrl:"directives/plannerprofilesearch.html",replace:!0,scope:{plannerData:"=",searchData:"=",clientValue:"&",postSearchUnfulfilled:"&"}}}),omApp.directive("searchSidebarLarge",function(){return{restrict:"EC",templateUrl:"directives/searchsidebarlarge.html",replace:!0,scope:{searchData:"=",toggle:"&",sidebarOpen:"=",plannerData:"="}}}),omApp.directive("searchSidebarSmall",function(){return{restrict:"EC",templateUrl:"directives/searchsidebarsmall.html",replace:!0,scope:{searchData:"=",toggle:"&",sidebarOpen:"=",plannerData:"="}}}),omApp.directive("disableAnimation",["$animate",function($animate){return{restrict:"A",link:function($scope,$element,$attrs){$attrs.$observe("disableAnimation",function(value){$animate.enabled(!value,$element)})}}}]),omApp.controller("plannerRegController",["$scope","$location","$log","plannerprof","plannerprofLanguages","$http",function($scope,$location,$log,plannerprof,plannerprofLanguages,$http){$scope.planner={},$scope.planner={name:"",email:"",number:""},$scope.submit=function(){$http.post("php/postPlannerEnquiry.php",{planner:$scope.planner}).success(function(result){console.log(result),$location.path("signupthanks")}).error(function(data,status){console.log(data)})}}]),omApp.directive("plannerProfile",function(){return{restrict:"EC",templateUrl:"directives/plannerprofile.html",replace:!0,scope:{plannerData:"="}}}),omApp.controller("resourcesController",["$scope","$http","$routeParams","$location",function($scope,$http,$routeParams,$location){$scope.readMore=function(path){$location.path(path)},$scope.blogCategory="All",$scope.setBlogCategory=function(blogCategory){$location.path("resources"),$scope.blogCategory=blogCategory},$scope.currentPath=$location.path(),$scope.loadShareThis=function(){stButtons.makeButtons()}}]),omApp.directive("blogSidebar",function(){return{restrict:"EC",templateUrl:"directives/blogSidebar.html",replace:!0,scope:{blogCategory:"=",setBlogCategory:"&",currentPath:"=",loadShareThis:"&"}}});